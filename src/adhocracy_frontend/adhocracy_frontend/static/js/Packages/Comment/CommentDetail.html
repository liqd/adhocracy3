<div class="comment {{ selectedState }}" data-ng-switch="mode" data-ng-if="data">
    <div class="discussion-header">
        <span class="discussion-header-icon">
            <i class="icon-speechbubble-outline"></i>
        </span>
        <div class="discussion-header-column2">
            <i class="icon-speechbubble-outline"></i>
            {{data.commentCount}}
        </div>
        <div class="discussion-header-column1">
            <div class="discussion-header-creator">
                <adh-user-meta data-path="{{data.creator}}"></adh-user-meta>
            </div>
            <div class="discussion-header-date">
                <adh-time data-datetime="{{data.modificationDate}}"></adh-time>
            </div>
        </div>
    </div>

    <div class="comment-main">
        <div class="comment-title">
            <adh-user-meta data-path="{{data.creator}}"></adh-user-meta>
            <adh-rate data-refers-to="{{data.path}}"
                      data-post-pool-sheet="adhocracy.sheets.rate.IRateable"
                      data-post-pool-field="post_pool">
            </adh-rate>
        </div>
        <div data-ng-switch-when="1">
            <div class="form-error" data-ng-repeat="error in errors">
                <p>{{ error | translate }}</p>
            </div>
        </div>
        <div class="comment-content">
            <textarea data-msd-elastic="" data-ng-switch-when="1" data-ng-model="data.content"></textarea>
            <div data-ng-switch-default="">{{data.content}}</div>
        </div>
        <div class="comment-meta">
            <adh-time data-datetime="{{data.modificationDate}}"></adh-time>

            <div class="comment-actions">
                <span data-ng-switch-default="">
                    <a href=""
                       data-ng-if="poolOptions.POST"
                       class="comment-action"
                       data-ng-click="edit()">
                        {{ "Edit" | translate }}</a>
                    <a href=""
                       data-ng-if="poolOptions.POST"
                       class="comment-action m-comment-reply"
                       data-ng-click="createComment()">
                        {{ "Add Comment" | translate }}</a>
                </span>
                <a href="" class="comment-action" data-ng-switch-when="1" data-ng-click="submit()">{{ "Save" | translate }}</a>
                <a href="" class="comment-action" data-ng-switch-when="1" data-ng-click="cancel()">{{ "Cancel" | translate }}</a>
                <span class="comment-count">
                    <i class="icon-speechbubble-outline"></i>
                    {{data.commentCount}}
                </span>
            </div>
        </div>
    </div>

    <div class="comment-children-create-form" data-ng-if="show.createForm">
        <adh-resource-wrapper
            data-on-submit="afterCreateComment()"
            data-on-cancel="cancelCreateComment()">
            <adh-comment-create
                data-path="{{createPath}}"
                data-mode="edit"
                data-refers-to="{{data.path}}"
                data-pool-path="{{data.replyPoolPath}}">
            </adh-comment-create>
        </adh-resource-wrapper>
    </div>

    <div class="comment-children">
        <adh-resource-wrapper
            data-ng-repeat="comment in data.comments">
            <adh-comment-resource
                data-path="{{comment}}"
                data-mode="display">
            </adh-comment-resource>
        </adh-resource-wrapper>
    </div>
</div>
